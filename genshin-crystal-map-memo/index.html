<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>スライドショー</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    html, body {
      height: 100%;
    }
    body {
      background-color: #f8f9fa;
      text-align: center;
      padding: 0;
      margin: 0;
      height: 100vh;
    }
    .container {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      padding: 1rem;
    }
    .slide-wrapper {
      flex-grow: 1;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    #slide {
      max-height: 80vh;
      max-width: 100vw;
      width: auto;
      height: auto;
      object-fit: contain;
      border: 1px solid #ccc;
      background: white;
      box-sizing: border-box;
    }
    .slide-controls {
      margin-top: 1.5rem;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 1rem;
    }
    .slide-controls button {
      min-width: 90px;
      font-size: 1.1rem;
      padding: 0.6em 1.2em;
    }
    #counter {
      font-size: 1.1rem;
      min-width: 70px;
      display: inline-block;
    }
    @media (max-width: 600px) {
      .slide-controls {
        flex-direction: column;
        gap: 0.5rem;
      }
      #slide {
        max-height: 60vh;
        max-width: 98vw;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="slide-wrapper">
      <img id="slide" src="" alt="Slide" class="rounded shadow">
    </div>
    <div class="slide-controls">
      <button class="btn btn-secondary" onclick="prev()">前へ</button>
      <span id="counter"></span>
      <button class="btn btn-primary" onclick="next()">次へ</button>
    </div>
  </div>
  <script id="slides-json" type="application/json">
[
  "slides/slide_01.png",
  "slides/slide_02.png",
  "slides/slide_03.png",
  "slides/slide_04.png",
  "slides/slide_05.png",
  "slides/slide_06.png",
  "slides/slide_07.png",
  "slides/slide_08.png",
  "slides/slide_09.png",
  "slides/slide_10.png",
  "slides/slide_11.png"
]
  </script>
  <script>
    const slides = JSON.parse(document.getElementById("slides-json").textContent.trim());
    let current = 0;
    const img = document.getElementById('slide');
    const counter = document.getElementById('counter');
    function update() {
      img.src = slides[current];
      counter.textContent = (current + 1) + ' / ' + slides.length;
    }
    function prev() {
      current = (current - 1 + slides.length) % slides.length;
      update();
    }
    function next() {
      current = (current + 1) % slides.length;
      update();
    }
    // スワイプ操作対応
    let touchStartX = null;
    img.addEventListener('touchstart', function(e) {
      if (e.touches.length === 1) {
        touchStartX = e.touches[0].clientX;
      }
    });
    img.addEventListener('touchend', function(e) {
      if (touchStartX === null) return;
      const touchEndX = e.changedTouches[0].clientX;
      const dx = touchEndX - touchStartX;
      if (Math.abs(dx) > 50) {
        if (dx < 0) {
          next(); // 左スワイプ
        } else {
          prev(); // 右スワイプ
        }
      }
      touchStartX = null;
    });
    update();
  </script>
</body>
</html>
